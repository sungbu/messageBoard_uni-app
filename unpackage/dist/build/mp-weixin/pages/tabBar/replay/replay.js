(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/replay/replay"],{"20c2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=(e._self._c,e.__map(e.replays,function(t,a){var n=e.getname(a,e.messNames,"name"),s=e.changeData(t.ctime),o=e.judgePick(t.isPick,t.message),u=e.getname(a,e.messages,"message"),i=e.getname(a,e.messNames,"name");return{$orig:e.__get_orig(t),m0:n,m1:s,m2:o,m3:u,m4:i}}));e.$mp.data=Object.assign({},{$root:{l0:a}})},s=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s})},"33e8":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("5174"));function s(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{loginCode:0,userId:void 0,userDes:[],replays:[],userIdCard:[],page:1,num:6,loadingText:"加载中...",messNames:[],messages:[]}},onShow:function(){this.userDes=[],this.userId=void 0,this.verification(this),1==this.loginCode?(this.userDes=[],this.userId=this.userIdCard[0].id,this.initData()):this.navigateToSiginIn()},onReachBottom:function(){this.page++,this.$options.methods.getUserReplay(this)},onPullDownRefresh:function(){this.loadingText="加载中...",this.page=1,this.replays=[],this.userDes=[],this.initData(),e.stopPullDownRefresh()},methods:{initData:function(){this.$options.methods.allPickReplayNum(this),this.$options.methods.getUserReplay(this)},userIdGetUserName:function(t,a,s){e.request({method:"POST",url:n.default.getUserDes,data:{userId:t.messId},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){a.messNames.push({name:e.data.data[0].username,index:s})}})},getname:function(e,t,a){console.log(t);var n="";return t.forEach(function(t){e==t.index&&(n=t[a])}),n},tabIdGetMessage:function(t,a,s){e.request({method:"POST",url:n.default.tabIdGetMessage,data:{tabId:t.tabId},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){a.messages.push({message:e.data.data[0].content,index:s})}})},verification:function(t){t.userIdCard=[],e.getStorage({key:"userDes",success:function(e){console.log(e.data),t.loginCode=1,t.userIdCard.push(e.data)}})},navigateToSiginIn:function(){e.navigateTo({url:"../../paging/signIn"})},sendReplay:function(t,a){var s=this;e.request({method:"POST",url:n.default.addPick,data:{replay:1,tabId:a.tabId,userId:a.userId,messId:s.userId,message:t.target.value},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t.data),1==t.data.code&&e.showToast({title:"已评论",icon:"none"})}})},allPickReplayNum:function(t){e.request({method:"POST",url:n.default.getUserDes,data:{userId:t.userId},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.userDes=e.data.data}})},getUserReplay:function(t){1==t.page&&(t.replays=[]),e.request({method:"POST",url:n.default.userIdGetReplayNum,data:{userId:t.userId,page:t.page,num:t.num},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){console.log(e.data.data),void 0==e.data.data?t.loadingText="到底了":e.data.data.length>0?e.data.data.forEach(function(e,a){t.replays.push(e),t.$options.methods.userIdGetUserName(e,t,a),t.$options.methods.tabIdGetMessage(e,t,a)}):t.loadingText="到底了"}})},judgePick:function(e,t){return 1==e?"赞了你的留言":t},changeData:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<9?"0"+t.getDate():t.getDate())}}};t.default=o}).call(this,a("543d")["default"])},"3daa":function(e,t,a){"use strict";a.r(t);var n=a("20c2"),s=a("fe77");for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);a("695d");var u=a("2877"),i=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=i.exports},4950:function(e,t,a){},"4f09":function(e,t,a){"use strict";(function(e){a("8df6"),a("921b");n(a("66fd"));var t=n(a("3daa"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"695d":function(e,t,a){"use strict";var n=a("4950"),s=a.n(n);s.a},fe77:function(e,t,a){"use strict";a.r(t);var n=a("33e8"),s=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=s.a}},[["4f09","common/runtime","common/vendor"]]]);